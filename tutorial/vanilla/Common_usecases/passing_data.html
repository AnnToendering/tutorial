<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Onsen UI App</title>
<script>
        window.fn = {};
        window.fn.data = null;
        
        ons.ready(function(){
            document.addEventListener("show", function(event){
                if(event.target.id=='myPage2Id') { 
                    document.getElementById('myData').innerHTML = document.getElementById('myInput').value;
                }
            });
            
            var myTabBar = document.getElementById('myTabBar')
            myTabBar.addEventListener("postchange", function(event) {
                if (event.index == 1) {
                    document.getElementById('myData2').innerHTML = document.getElementById('myInput').value;
                }
            });
            
            document.addEventListener("show", function(event){
                if(event.target.id=='myPage3Id') { 
                    document.getElementById('myData3').innerHTML = fn.data;
                    // This does not need to be set to null; however, by doing so you are running GC
                    fn.data = null;
                }
            });
        });
        
        window.fn.showPopover = function(target) {
            document.getElementById('popover').show(target);
            document.getElementById('myPopoverData').innerHTML = document.getElementById('myInput').value;
        };
        
        window.fn.hidePopover = function() {
            document.getElementById('myInput').value = document.getElementById('myPopoverInput').value;
            document.getElementById('popover').hide();
        };
        
        window.fn.loadPage = function(page,data) {
            fn.data = data;
            document.getElementById('myNavigator').pushPage(page);
        };
    </script>
</head>
<body>
<ons-navigator id="myNavigator" page="homePage"></ons-navigator>
<ons-template id="homePage">
    <ons-page>
      <ons-toolbar>
        <div class="center">Passing Data Example</div>
      </ons-toolbar>
      <ons-tabbar id="myTabBar">
        <ons-tab page="page1.html" label="Page 1" active="true"></ons-tab>
        <ons-tab page="page2.html" label="Page 2"></ons-tab>
      </ons-tabbar>
    </ons-page>
</ons-template>

<ons-template id="page1.html">
    <ons-page id="myPage1Id">
        <div style="text-align: center;">
            <p>Go to Page 2, in order to load the data between pages</p>
            <ons-input id="myInput" placeholder="Input Data to be Passed"></ons-input>
            <br /><br />
            <ons-button onclick="fn.showPopover(this)">Pass Data to a Popover</ons-button>
            <br /><br />
            <ons-button onclick="fn.loadPage('page3.html','Static Example Data')">Open a Page in a Navigator</ons-button>
        </div>
    </ons-page>
</ons-template>
<ons-template id="page2.html">
    <ons-page id="myPage2Id">
        <div style="text-align: center;">
            <p>This data was diplayed on page show:</p>
            <div id="myData"></div>
            <p>This data was displayed on tab change:</p>
            <div id="myData2"></div>
        </div>
    </ons-page>
</ons-template>
<ons-template id="page3.html">
    <ons-page id="myPage3Id">
        <div style="text-align: center;">
            <p>This data was diplayed on page show:</p>
            <div id="myData3"></div>
        </div>
    </ons-page>
</ons-template>
<ons-popover direction="down" id="popover">
    <div style="text-align: center;">
        <p>This data was passed:</p>
        <div id="myPopoverData"></div>
        <ons-input id="myPopoverInput" placeholder="Input Data to be Passed Back"></ons-input>
        <p><ons-button onclick="fn.hidePopover()">Close</ons-button></p>
    </div>
</ons-popover>
</body>
</html>

<!-- info
## Passing Data to and from Pages, Popovers, and Navigators

-->
